/*!  2014-10-12 */
!function(a){function b(a){var c=function(a){return b(s[a])};if(c.async=function(a,b){h(a,b)},a.state<1){var d=a.oldDeps.length,e=[c,a.exports,a];if(d)for(var f=0;d>f;f++)e.push(c(a.oldDeps[f]));var g=a.factory.apply(a,e);g&&(a.exports=g),a.state=1}return a.exports}function c(a){var b=[];return a.toString().replace(q,"").replace(p,function(a,c,d){b.push(d)}),b}function d(a,b,c,d){return s[a]?s[a]:s[a]={id:a,deps:b,factory:c,oldDeps:d,exports:{},state:0}}function e(a,b){var c=f(a);if(!c.length)return void(b&&b());for(var d=[],e=0;e<c.length;e++)d.push(g(c[e]));(new n).promise.when(d,function(){b&&b()})}function f(a){for(var b=[],d=a.deps=0==a.deps.length?a.deps.concat(c(a.factory)):a.deps,e=0;e<d.length;e++)s[d[e]]||b.push(d[e]);return b}function g(a){var b=document.createElement("script"),c=null;b.charset=m.charset,b.src=m.path+"/"+a.replace(/\./g,"/")+".js"+(/msie/.test(navigator.userAgent.toLowerCase())?"?_="+o++:""),b.async=!0;var d=new n;return b.onload=b.onreadystatechange=function(){/^(?:loaded|complete|undefined)$/.test(b.readyState)&&(b.onerror=b.onload=b.onreadystatechange=null,s[a]?e(s[a],function(){d.resolve(a)}):setTimeout(arguments.callee,1))},b.onerror=function(){throw b.error=b.onload=b.onreadystatechange=null,new Error("Module '"+a+"' is not defined")},c=b,k.appendChild(b),c=null,d.promise}function h(a,c){a=a instanceof Array?a:[a],moduleList=[];for(var d=0;d<a.length;d++)if(s[a[d]]){var f=new n;e(s[a[d]],function(){f.resolve(a[d])}),moduleList.push(f.promise)}else moduleList.push(g(a[d]));(new n).promise.when(moduleList,function(a){if(c){for(var d=[],e=0;e<a.length;e++)d.push(b(s[a[e]]));c.apply(null,d)}})}var i,j,k,l,m={charset:"UTF-8",path:""};i=a.document.getElementById("diy"),m.path=i.getAttribute?i.getAttribute("basePath"):i.basePath,m.path||(j=a.location.href.split("/"),j.pop(),m.path=j.join("/")),k=document.getElementsByTagName("head")[0],l="ld";var n=function(){function a(){var a=this,c="promiseA";a.then=function(b,c){return a.success(b).error(c)},a.success=function(c){if("resolved"==b.state){var d=c.call(a,b.value);d&&("promiseA"==d.getType()?b.promise=d:b.value=d)}else b.successCallbacklist.push(c);return b.promise},a.error=function(c){if("rejected"==b.state){var d=c.call(a,b.value);d&&("promiseA"==d.getType()?b.promise=d:b.value=d)}else b.errorCallbacklist.push(c);return b.promise},a._getState=function(){return b.state},a._getValue=function(){return b.value},a.getType=function(){return c},a.promises=[],a.all=function(c){a.promises=c instanceof Array?c:[c];for(var d=a.promises.length,e=0;d>e;e++)!function(c){a.promises[c].then(function(){for(var c=!0,e=[],f=0;d>f;f++)"rejected"==a.promises[f]._getState()||"default"==a.promises[f]._getState()?c=!1:e.push(a.promises[f]._getValue());c&&b.resolve(e)},function(){for(var c=!0,e=[],f=0;d>f;f++)"resolved"==a.promises[f]._getState()||"default"==a.promises[f]._getState()?c=!1:e.push(a.promises[f]._getValue());c&&b.reject(e)})}(e);return a},a.when=function(c,d){return c instanceof Array||"promiseA"==c.__type__?a.all(c).success(d):(b.resolve(c),a.success(d))}}var b=this;b.state="default",b.value="",b.successCallbacklist=[],b.errorCallbacklist=[],b.resolve=function(a){if("default"==b.state){b.state="resolved",b.value=a;for(var c=0;c<b.successCallbacklist.length;c++)b.promise.success(b.successCallbacklist[c])}},b.reject=function(a){if("default"==b.state){b.state="rejected",b.value=a;for(var c=0;c<b.errorCallbacklist.length;c++)b.promise.error(b.errorCallbacklist[c])}},b.promise=new a},o=(new Date).getTime(),p=/require\(('|")([^()<>\\\/|?*:]*)('|")\)/g,q=/(\/\*(.|[\r\n])*?\*\/)|((\/\/.*))/g,r=new RegExp("ld\\:\\d{"+o.toString().length+"}"),s={};a.define=function(a,f,g){"function"==typeof a&&(g=a,a=l+":"+o++),"function"==typeof f&&(g=f,f=[]),g||(g=function(){});var h=f instanceof Array?f:[];f=f?(f||[]).concat(c(g)):c(g);var i=d(a,f,g,h);r.test(a)&&e(i,function(){b(i)})};var t=function(){};t.define=a.define,t.use=h,a.diy=t}(window),define("object",[],function(a,b,c){c.exports={merge:function(a,b){var c=a||{};if(this.isArray(a)&&this.isArray(b))c=c.concat(b);else if("object"==typeof c||"function"==typeof c)for(var d in b){var e=b[d];c[d]="object"==typeof e&&"object"==typeof c[d]?arguments.callee(c[d],e):e}return c},isArray:Array.isArray||function(){return"[object Array]"===Object.prototype.toString.call(obj)},isWindow:function(a){return a.window?a.window===a:!1},trim:function(a){return a.replace(/(^\s+)|(\s+$)/g,"")}}}),define("array",[],function(a,b,c){var d=Array.prototype.forEach||function(a){for(var b=0,c=this.length;c>b;b++)a&&a(this[b],b)};c.exports={__proto__:Array.prototype,getArray:function(a){return Array.prototype.slice.call(a)},each:function(a){for(var b=0,c=this.length;c>b;b++)a&&a(b,this[b])},forEach:function(a){d.call(this,a)}}}),define("event",[],function(a){function b(a){return a.__uuid__||(a.__uuid__=n++),a.__uuid__}function c(a){return m[a]||(m[a]={}),m[a]}function d(a,d,e){function f(b){var c=e.call(a,b);c===!1&&(b.preventDefault(),b.stopPropagation())}var g,h=b(a),i=c(h);o(i[d])||(i[d]=[],i[d].__proto__=l),g=i[d].length,e.i=g,i[d].push({fn:e,proxy:f}),a.addEventListener(d,i[d][g].proxy,!1)}function e(a,d,e){var f=b(a),g=c(f);e?"number"==typeof e.i&&o(g[d])&&g[d][e.i]&&(a.removeEventListener(d,g[d][e.i].proxy,!1),delete g[d][e.i]):o(g[d])&&g[d].forEach(function(b,c){b&&(a.removeEventListener(d,g[d][c].proxy,!1),delete g[d][c])})}function f(a,b){var c=document.createEvent(p[a]||"Events"),d=!0;if(b)for(var e in b)"bubbles"===e?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0),c}function g(a,d,e){{var g=b(a);c(g)}a.dispatchEvent(f(d,e))}function h(a,b){return this.forEach(function(c){d(c,a,b)}),this}function i(a,b){return this.forEach(function(c){e(c,a,b)}),this}function j(a,b){return this.forEach(function(c){g(c,a,b)}),this}var k=a("object"),l=a("array"),m={},n=new Date,o=k.isArray,p={click:"MouseEvents",mousedown:"MouseEvents",mouseup:"MouseEvents",mousemove:"MouseEvents"};return{on:h,un:i,trigger:j}}),define("dom",[],function(a,b,c){var d=a("object"),e=a("array"),f=a("event"),g={__type__:"App.dom",hasClass:function(a){var b=this[0].className,c=new RegExp("(^|\\s+)"+a+"(\\s+|$)","g");return c.test(b)},addClass:function(a){var b=new RegExp("(^|\\s+)"+a+"(\\s+|$)","g");return this.forEach(function(c){var d=c.className;b.test(d)||(c.className=d+" "+a)}),this},removeClass:function(a){var b=new RegExp("(\\s+)"+a+"(\\s+)","g");return this.forEach(function(a){var c=" "+a.className+" ";a.className=d.trim(c.replace(b," "))}),this},find:function(a){var b=[];return this.forEach(function(c){b=b.concat(e.getArray(c.querySelectorAll(a)))}),b.__proto__=c.exports,b},css:function(){var a,b=arguments[0],c=arguments.length;if(2===c)return a=arguments[1],this.forEach(function(c){c.style[b]=a}),this;if(2>c){if("string"==typeof b)return this[0].style[b];if("object"==typeof b){for(var d in b)this.forEach(function(a){a.style[d]=b[d]});return this}}},attr:function(){var a,b=arguments[0],c=arguments.length;if(2===c)return a=arguments[1],this.forEach(function(c){c.setAttribute(b,a)}),this;if(2>c){if("string"==typeof b)return this[0].getAttribute(b);if("object"==typeof b){for(var d in b)this.forEach(function(a){a.setAttribute(d,ttr[d])});return this}}},eq:function(a){var b,d=this.length-1;return a=a>d?d:a,a=0>a?0:a,b=[this[a]],b.__proto__=c.exports,b},parent:function(){var a=[];return this.forEach(function(b){a.push(b.parentNode)}),a.__proto__=c.exports,a},html:function(){var a=arguments;return a.length>0&&"string"==typeof a[0]?void this.forEach(function(b){b.innerHTML=a[0]}):this[0].innerHTML}};g=d.merge(g,e),g=d.merge(g,f),c.exports=g}),define("query",[],function(a,b,c){var d=a("object"),e=a("array"),f=a("dom");c.exports={query:function(a,b){var c,g=b||document;return d.isArray(a)?(a.__proto__=e,a):"object"==typeof a&&a.nodeType||d.isWindow(a)?(c=[a],c.__proto__=f,c):"object"==typeof a&&"App.dom"===a.__type__?a:(c=e.getArray(g.querySelectorAll(a)),c.__proto__=f,c)}}}),define(function(a){var b=a("object"),c=a("query"),d=c.query;!function(){function a(a,b){return a.type=="pointer"+b||a.type.toLowerCase()=="mspointer"+b}function b(a){return("touch"==a.pointerType||a.pointerType==a.MSPOINTER_TYPE_TOUCH)&&a.isPrimary}function c(){h&&clearTimeout(h),h=null}function e(a,b,c,d){return Math.abs(a-b)>=Math.abs(c-d)?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function f(){g?clearTimeout(g):"",j?clearTimeout(j):"",i?clearTimeout(i):"",h?clearTimeout(h):"",g=j=i=h=null,m={}}var g,h,i,j,k,l,m={},n=750;d(document).on("DOMContentLoaded",function(){var o,p,q,r,s=0,t=0;"MSGesture"in window&&(l=new MSGesture,l.target=document.body),d(document).on("touchstart",function(c){(!(p=a(c,"down"))||b(c))&&(o=p?c:c.touches[0],q=Date.now(),r=q-(m.last||q),m.el=d("tagName"in o.target?o.target:o.target.parentNode),g&&clearTimeout(g),m.x1=o.pageX,m.y1=o.pageY,r>0&&250>=r&&(m.isDoubleTap=!0),m.last=q,h=setTimeout(function(){h=null,m.last&&(m.el.trigger("longTap",c),m={})},n),l&&p&&l.addPointer(c.pointerId))}).on("touchmove",function(d){if(!(p=a(d,"move"))||b(d)){c(),o=p?d:d.touches[0],m.x2=o.pageX,m.y2=o.pageY;var e=m.x2-m.x1,f=m.y2-m.y1;s+=Math.abs(e),t+=Math.abs(f),o.deltaX=e,o.deltaY=f,k=setTimeout(function(){m.el&&m.el.trigger("swipeMove",d)},0)}}).on("touchend",function(d){if(!(p=a(d,"up"))||b(d)){c();var f=m.x2-m.x1,h=m.y2-m.y1;o=d,m.x2&&Math.abs(f)>30||m.y2&&Math.abs(h)>30?(o.deltaX=f,o.deltaY=h,o.pageX=m.x2,o.pageY=m.y2,i=setTimeout(function(){m.el.trigger("swipe",d),m.el.trigger("swipe"+e(m.x1,m.x2,m.y1,m.y2),d),m={}},0)):"last"in m&&(o.pageX=m.x2,o.pageY=m.y2,m.el.trigger("tap",d),30>s&&30>t?j=setTimeout(function(){m.isDoubleTap?(m.el&&m.el.trigger("doubleTap",d),m={}):g=setTimeout(function(){g=null,m.el&&m.el.trigger("singleTap",d),m={}},250)},0):m={}),s=t=0}}).on("touchcancel",f),d(window).on("scroll",f)})}();for(var e in window.diy)window.diy.hasOwnProperty(e)&&(d[e]=window.diy[e]);d.object=b,window.diy=d});